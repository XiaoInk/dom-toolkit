# å¿«é€ŸéªŒè¯é¡µé¢
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM Toolkit å¿«é€ŸéªŒè¯</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-button { background: #007bff; color: white; border: none; padding: 8px 16px; margin: 5px; border-radius: 3px; cursor: pointer; }
        .test-button:hover { background: #0056b3; }
        .status { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 5px; max-width: 300px; }
        .test-area { width: 150px; height: 60px; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; margin: 10px 0; border-radius: 3px; cursor: pointer; }
        .input-test { padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 3px; }
        .scroll-content { height: 1500px; background: linear-gradient(to bottom, #f0f0f0, #e0e0e0); padding: 20px; margin: 20px 0; }
        .result { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 3px; }
        .pass { color: #28a745; font-weight: bold; }
        .fail { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸš€ DOM Toolkit å¿«é€ŸéªŒè¯</h1>
    <div id="status" class="status">å‡†å¤‡éªŒè¯...</div>
    
    <div class="test-section">
        <h2>ğŸ“¦ åŠ è½½éªŒè¯</h2>
        <button class="test-button" onclick="testLoading()">æµ‹è¯•è„šæœ¬åŠ è½½</button>
        <div id="loading-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ–±ï¸ ç‚¹å‡»éªŒè¯</h2>
        <div class="test-area" id="click-target" onclick="this.textContent='ç‚¹å‡»æˆåŠŸ!'">ç‚¹å‡»ç›®æ ‡</div>
        <button class="test-button" onclick="testClick()">æµ‹è¯•è‡ªåŠ¨ç‚¹å‡»</button>
        <button class="test-button" onclick="testDoubleClick()">æµ‹è¯•åŒå‡»</button>
        <button class="test-button" onclick="testRightClick()">æµ‹è¯•å³é”®</button>
        <div id="click-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>âŒ¨ï¸ è¾“å…¥éªŒè¯</h2>
        <input type="text" id="test-input" class="input-test" placeholder="æµ‹è¯•è¾“å…¥æ¡†">
        <button class="test-button" onclick="testType()">æµ‹è¯•è‡ªåŠ¨è¾“å…¥</button>
        <button class="test-button" onclick="clearInput()">æ¸…ç©º</button>
        <div id="type-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“œ æ»šåŠ¨éªŒè¯</h2>
        <button class="test-button" onclick="testScroll('down', 300)">å‘ä¸‹æ»šåŠ¨</button>
        <button class="test-button" onclick="testScroll('up', 300)">å‘ä¸Šæ»šåŠ¨</button>
        <button class="test-button" onclick="testScroll({top: true})">æ»šåŠ¨åˆ°é¡¶éƒ¨</button>
        <button class="test-button" onclick="testScroll({bottom: true})">æ»šåŠ¨åˆ°åº•éƒ¨</button>
        <div id="scroll-result" class="result"></div>
    </div>
    
    <div class="scroll-content">
        <h2>é•¿å†…å®¹åŒºåŸŸï¼ˆç”¨äºæ»šåŠ¨æµ‹è¯•ï¼‰</h2>
        <div class="test-area" id="scroll-target">æ»šåŠ¨ç›®æ ‡</div>
        <p>ç»§ç»­å‘ä¸‹æ»šåŠ¨...</p>
    </div>
    
    <div class="test-section">
        <h2>ğŸ”„ æ‰¹é‡æ“ä½œéªŒè¯</h2>
        <button class="test-button" onclick="testBatchClick()">æ‰¹é‡ç‚¹å‡»æµ‹è¯•</button>
        <button class="test-button" onclick="testBatchOperate()">å¤æ‚æ‰¹é‡æ“ä½œ</button>
        <div id="batch-result" class="result"></div>
    </div>
    
    <!-- åŠ è½½æœ¬åœ°æ„å»ºçš„è„šæœ¬ -->
    <script src="dist/dom-toolkit.inject.min.js"></script>
    
    <script>
        function updateStatus(message) {
            document.getElementById('status').textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
        }
        
        function showResult(elementId, message, isPass = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<span class="${isPass ? 'pass' : 'fail'}">${isPass ? 'âœ…' : 'âŒ'} ${message}</span>`;
        }
        
        // æµ‹è¯•è„šæœ¬åŠ è½½
        function testLoading() {
            updateStatus('æµ‹è¯•è„šæœ¬åŠ è½½...');
            try {
                if (typeof domToolkit !== 'undefined') {
                    showResult('loading-result', 'è„šæœ¬åŠ è½½æˆåŠŸï¼ŒdomToolkit å¯¹è±¡å¯ç”¨');
                    updateStatus('âœ… è„šæœ¬åŠ è½½éªŒè¯é€šè¿‡');
                } else {
                    showResult('loading-result', 'è„šæœ¬åŠ è½½å¤±è´¥', false);
                    updateStatus('âŒ è„šæœ¬åŠ è½½éªŒè¯å¤±è´¥');
                }
            } catch (error) {
                showResult('loading-result', `åŠ è½½é”™è¯¯: ${error.message}`, false);
            }
        }
        
        // æµ‹è¯•ç‚¹å‡»
        function testClick() {
            updateStatus('æµ‹è¯•è‡ªåŠ¨ç‚¹å‡»...');
            const target = document.getElementById('click-target');
            const rect = target.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            domToolkit.click(x, y)
                .then(() => {
                    showResult('click-result', 'å•ç‚¹æµ‹è¯•é€šè¿‡');
                    updateStatus('âœ… ç‚¹å‡»éªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('click-result', `ç‚¹å‡»å¤±è´¥: ${err.message}`, false);
                    updateStatus('âŒ ç‚¹å‡»éªŒè¯å¤±è´¥');
                });
        }
        
        function testDoubleClick() {
            updateStatus('æµ‹è¯•åŒå‡»...');
            const target = document.getElementById('click-target');
            const rect = target.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            domToolkit.doubleClick(x, y)
                .then(() => {
                    showResult('click-result', 'åŒå‡»æµ‹è¯•é€šè¿‡');
                    updateStatus('âœ… åŒå‡»éªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('click-result', `åŒå‡»å¤±è´¥: ${err.message}`, false);
                });
        }
        
        function testRightClick() {
            updateStatus('æµ‹è¯•å³é”®ç‚¹å‡»...');
            const target = document.getElementById('click-target');
            const rect = target.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            domToolkit.rightClick(x, y)
                .then(() => {
                    showResult('click-result', 'å³é”®ç‚¹å‡»æµ‹è¯•é€šè¿‡');
                    updateStatus('âœ… å³é”®éªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('click-result', `å³é”®å¤±è´¥: ${err.message}`, false);
                });
        }
        
        // æµ‹è¯•è¾“å…¥
        function testType() {
            updateStatus('æµ‹è¯•è‡ªåŠ¨è¾“å…¥...');
            const input = document.getElementById('test-input');
            const rect = input.getBoundingClientRect();
            const x = rect.left + 10;
            const y = rect.top + rect.height / 2;
            
            domToolkit.type(x, y, 'è‡ªåŠ¨åŒ–æµ‹è¯•æ–‡æœ¬', { clear: true, typingDelay: 50 })
                .then(() => {
                    showResult('type-result', 'è‡ªåŠ¨è¾“å…¥æµ‹è¯•é€šè¿‡');
                    updateStatus('âœ… è¾“å…¥éªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('type-result', `è¾“å…¥å¤±è´¥: ${err.message}`, false);
                    updateStatus('âŒ è¾“å…¥éªŒè¯å¤±è´¥');
                });
        }
        
        function clearInput() {
            document.getElementById('test-input').value = '';
            showResult('type-result', 'è¾“å…¥æ¡†å·²æ¸…ç©º');
        }
        
        // æµ‹è¯•æ»šåŠ¨
        function testScroll(...args) {
            updateStatus('æµ‹è¯•æ»šåŠ¨åŠŸèƒ½...');
            domToolkit.scroll(...args)
                .then(() => {
                    showResult('scroll-result', `æ»šåŠ¨æµ‹è¯•é€šè¿‡: ${JSON.stringify(args)}`);
                    updateStatus('âœ… æ»šåŠ¨éªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('scroll-result', `æ»šåŠ¨å¤±è´¥: ${err.message}`, false);
                    updateStatus('âŒ æ»šåŠ¨éªŒè¯å¤±è´¥');
                });
        }
        
        // æµ‹è¯•æ‰¹é‡æ“ä½œ
        function testBatchClick() {
            updateStatus('æµ‹è¯•æ‰¹é‡ç‚¹å‡»...');
            const target = document.getElementById('click-target');
            const rect = target.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            const operations = [
                { click: { x: centerX - 20, y: centerY } },
                { click: { x: centerX, y: centerY } },
                { click: { x: centerX + 20, y: centerY } }
            ];
            
            domToolkit.batch(operations, { delayBetween: 300 })
                .then(() => {
                    showResult('batch-result', 'æ‰¹é‡ç‚¹å‡»æµ‹è¯•é€šè¿‡');
                    updateStatus('âœ… æ‰¹é‡æ“ä½œéªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('batch-result', `æ‰¹é‡æ“ä½œå¤±è´¥: ${err.message}`, false);
                    updateStatus('âŒ æ‰¹é‡æ“ä½œéªŒè¯å¤±è´¥');
                });
        }
        
        function testBatchOperate() {
            updateStatus('æµ‹è¯•å¤æ‚æ‰¹é‡æ“ä½œ...');
            const operations = [
                { scroll: { top: true } },
                { click: { x: 400, y: 300 } },
                { scroll: { down: true, distance: 400 } },
                { click: { x: 400, y: 500 } }
            ];
            
            domToolkit.batchOperate(operations, { scrollDelay: 500, operationDelay: 300 })
                .then(() => {
                    showResult('batch-result', 'å¤æ‚æ‰¹é‡æ“ä½œæµ‹è¯•é€šè¿‡');
                    updateStatus('âœ… å¤æ‚æ‰¹é‡æ“ä½œéªŒè¯é€šè¿‡');
                })
                .catch(err => {
                    showResult('batch-result', `å¤æ‚æ‰¹é‡æ“ä½œå¤±è´¥: ${err.message}`, false);
                    updateStatus('âŒ å¤æ‚æ‰¹é‡æ“ä½œéªŒè¯å¤±è´¥');
                });
        }
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', function() {
            setTimeout(() => {
                testLoading();
            }, 500);
        });
    </script>
</body>
</html>