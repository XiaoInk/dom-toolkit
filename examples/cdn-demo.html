<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dom-toolkit CDN 使用演示</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .demo-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        .demo-button:hover {
            background: #0056b3;
        }
        .demo-input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            width: 200px;
        }
        .status {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 3px;
            margin-top: 10px;
        }
        .large-content {
            height: 2000px;
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .clickable-area {
            width: 100px;
            height: 50px;
            background: #28a745;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin: 10px 0;
            border-radius: 3px;
        }
        #status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <h1>dom-toolkit CDN 使用演示</h1>
    
    <div class="demo-section">
        <h2>1. 基础功能测试</h2>
        <button class="demo-button" onclick="startCoordinates()">开始坐标显示</button>
        <button class="demo-button" onclick="stopCoordinates()">停止坐标显示</button>
        <button class="demo-button" onclick="testClick()">测试点击</button>
        <button class="demo-button" onclick="testDoubleClick()">测试双击</button>
        <div id="status" class="status"></div>
    </div>
    
    <div class="demo-section">
        <h2>2. 输入功能测试</h2>
        <input type="text" id="testInput" class="demo-input" placeholder="测试输入框">
        <button class="demo-button" onclick="testType()">自动输入文本</button>
        <button class="demo-button" onclick="clearInput()">清空输入框</button>
    </div>
    
    <div class="demo-section">
        <h2>3. 滚动功能测试</h2>
        <button class="demo-button" onclick="testScrollDown()">向下滚动</button>
        <button class="demo-button" onclick="testScrollUp()">向上滚动</button>
        <button class="demo-button" onclick="testScrollToTop()">滚动到顶部</button>
        <button class="demo-button" onclick="testScrollToBottom()">滚动到底部</button>
    </div>
    
    <div class="demo-section">
        <h2>4. 元素检测测试</h2>
        <button class="demo-button" onclick="startDetection()">开始实时检测</button>
        <button class="demo-button" onclick="stopDetection()">停止实时检测</button>
        <div class="clickable-area" id="clickableArea">点击区域</div>
    </div>
    
    <div class="demo-section">
        <h2>5. 批量操作测试</h2>
        <button class="demo-button" onclick="testBatchClick()">批量点击</button>
        <button class="demo-button" onclick="testScrollAndClick()">滚动后点击</button>
        <button class="demo-button" onclick="testBatchOperate()">复杂批量操作</button>
    </div>
    
    <div class="large-content">
        <h2>长内容区域（用于测试滚动）</h2>
        <p>这是一个很长的内容区域，用于测试滚动功能。</p>
        <div class="clickable-area" style="margin: 100px 0;">中间点击区域</div>
        <p>继续向下滚动可以看到更多内容...</p>
        <div class="clickable-area" style="margin: 500px 0;">底部点击区域</div>
        <p>内容结束。</p>
    </div>
    
    <!-- 加载 dom-toolkit -->
    <script src="https://cdn.jsdelivr.net/npm/dom-toolkit/dist/dom-toolkit.js"></script>
    
    <script>
        // 状态显示函数
        function showStatus(message) {
            const status = document.getElementById('status');
            const timestamp = new Date().toLocaleTimeString();
            status.innerHTML = `[${timestamp}] ${message}`;
        }
        
        // 基础功能测试
        function startCoordinates() {
            if (typeof domToolkit !== 'undefined') {
                domToolkit.coordinates.startDisplay();
                showStatus('坐标显示已启动');
            } else {
                showStatus('dom-toolkit 未加载');
            }
        }
        
        function stopCoordinates() {
            if (typeof domToolkit !== 'undefined') {
                domToolkit.coordinates.stopDisplay();
                showStatus('坐标显示已停止');
            }
        }
        
        function testClick() {
            const area = document.getElementById('clickableArea');
            const rect = area.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            domToolkit.click(x, y)
                .then(() => showStatus('点击测试成功'))
                .catch(err => showStatus('点击测试失败: ' + err.message));
        }
        
        function testDoubleClick() {
            const area = document.getElementById('clickableArea');
            const rect = area.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            domToolkit.doubleClick(x, y)
                .then(() => showStatus('双击测试成功'))
                .catch(err => showStatus('双击测试失败: ' + err.message));
        }
        
        // 输入功能测试
        function testType() {
            const input = document.getElementById('testInput');
            const rect = input.getBoundingClientRect();
            const x = rect.left + 10;
            const y = rect.top + rect.height / 2;
            
            domToolkit.type(x, y, '自动化输入测试文本', { clear: true, typingDelay: 50 })
                .then(() => showStatus('输入测试成功'))
                .catch(err => showStatus('输入测试失败: ' + err.message));
        }
        
        function clearInput() {
            document.getElementById('testInput').value = '';
            showStatus('输入框已清空');
        }
        
        // 滚动功能测试
        function testScrollDown() {
            domToolkit.scroll('down', 300)
                .then(() => showStatus('向下滚动测试成功'))
                .catch(err => showStatus('滚动测试失败: ' + err.message));
        }
        
        function testScrollUp() {
            domToolkit.scroll('up', 300)
                .then(() => showStatus('向上滚动测试成功'))
                .catch(err => showStatus('滚动测试失败: ' + err.message));
        }
        
        function testScrollToTop() {
            domToolkit.scroll({ top: true })
                .then(() => showStatus('滚动到顶部成功'))
                .catch(err => showStatus('滚动到顶部失败: ' + err.message));
        }
        
        function testScrollToBottom() {
            domToolkit.scroll({ bottom: true })
                .then(() => showStatus('滚动到底部成功'))
                .catch(err => showStatus('滚动到底部失败: ' + err.message));
        }
        
        // 元素检测测试
        function startDetection() {
            domToolkit.detector.startRealtimeDetection();
            showStatus('实时检测已启动，按住Ctrl键移动鼠标');
        }
        
        function stopDetection() {
            domToolkit.detector.stopRealtimeDetection();
            showStatus('实时检测已停止');
        }
        
        // 批量操作测试
        function testBatchClick() {
            const area = document.getElementById('clickableArea');
            const rect = area.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            const operations = [
                { click: { x: centerX - 50, y: centerY } },
                { click: { x: centerX, y: centerY } },
                { click: { x: centerX + 50, y: centerY } }
            ];
            
            domToolkit.batch(operations, { delayBetween: 500 })
                .then(() => showStatus('批量点击测试成功'))
                .catch(err => showStatus('批量点击测试失败: ' + err.message));
        }
        
        function testScrollAndClick() {
            const area = document.querySelector('.large-content .clickable-area');
            if (!area) {
                showStatus('未找到目标元素');
                return;
            }
            
            const rect = area.getBoundingClientRect();
            domToolkit.scrollAndClick(0, 1000, rect.left + rect.width / 2, rect.top + rect.height / 2)
                .then(() => showStatus('滚动后点击测试成功'))
                .catch(err => showStatus('滚动后点击测试失败: ' + err.message));
        }
        
        function testBatchOperate() {
            const operations = [
                { scroll: { top: true } },
                { click: { x: 400, y: 300 } },
                { scroll: { down: true, distance: 500 } },
                { click: { x: 400, y: 400 } },
                { scroll: { down: true, distance: 500 } },
                { click: { x: 400, y: 500 } }
            ];
            
            domToolkit.batchOperate(operations, { scrollDelay: 800, operationDelay: 500 })
                .then(() => showStatus('复杂批量操作测试成功'))
                .catch(err => showStatus('复杂批量操作测试失败: ' + err.message));
        }
        
        // 页面加载完成后的初始化
        window.addEventListener('load', function() {
            if (typeof domToolkit !== 'undefined') {
                showStatus('dom-toolkit 加载成功，可以开始测试');
            } else {
                showStatus('dom-toolkit 加载失败，请检查CDN连接');
            }
        });
    </script>
</body>
</html>